<#include "../include/header.html">
<body>
<script src="${base.contextPath}/common/code?requestStatusdata=SYS.IF.REQUEST_STATUS" type="text/javascript"></script>
<!--<script src="${base.contextPath}/lib/bootstrap-3.3.7/js/bootstrap.min.js"></script>-->
<script src="${base.contextPath}/common/code?resourceTypeData=HAP_OM_ORDER_STATUS" type="text/javascript"></script>
<script src="${base.contextPath}/lib/bootstrap-3.3.7/js/bootstrap.min.js" ></script>
<script type="text/javascript">

  
    var viewModel = kendo.observable({
        model: {},
        saveFunction: function () {
            $('#inboundGrid').data('kendoGrid').saveChanges();
        },
        queryResource: function (e) {
            $('#inboundGrid').data('kendoGrid').dataSource.page(1);
        },
        resetForm: function (e) {
            var formData = viewModel.model.toJSON();
            for (var k in formData) {
                viewModel.model.set(k, null);
            }
        }
    });

   

    
</script>

<!-- 订单状态 -->
<script>
    viewModel = kendo.observable({
        model            : {},
        resourceTypeData2: resourceTypeData,
        createFunction: function(){
        	alert("1");
            $('#grid1').data('kendoGrid').addRow();
            
            
        },
        saveFunction: function(){
            $('#grid').data('kendoGrid').saveChanges();
        },
        queryResource    : function (e) {
            $('#grid').data('kendoGrid').dataSource.page(1);
        },
        resetForm: function (e) {
            var formData = viewModel.model.toJSON();
            for (var k in formData) {
                viewModel.model.set(k, null);
            }
        }
    });
</script>


<div id="batchDiv" style="display: none"></div>
 <div id="roleWin"></div>
<div class="col-sm-12" style="margin-top: 10px;">

    <div id="tabstrip">
        <ul>
            <li id="inboundtab"></li>
           
        </ul>
        <div id="page-content">
            <div class="panel" id="inQuery" style="padding: 0px;border:none;box-shadow: none;">
                <form class="form-horizontal" id="myForm">
                    <div class="panel-body">
                        <div class="row" style="margin-bottom: 10px;">
                            <div class="col-sm-4">
                                <div class="form-group">
                                   <label class="col-sm-3 control-label">订单编号</label>
                                    <div class="col-sm-8">
                                    <input type="text" style="width: 100%"
                                           data-bind="value:model.interfaceUrl" class="k-textbox">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                              <div class="form-group">
                                 <label class="col-sm-3 control-label">公司名称</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="parentId2" placeholder='<@spring.message ""/>'
                       style="width:150px;" data-bind="value:model.parentCompanyId">
                <script>
                    $("#parentId2").kendoLov($.extend(${lovProvider.getLov(base.contextPath, base.locale, "HapExam_LV_COMPANY")}, {
                        query: function (e) {
                            e.param['enabledFlag'] = 'Y';
                        }
                    }))
                </script>
                                           
                                           
                                </div>
                              </div>
                           </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">客户名称</label>
                                <div class="col-sm-8">
                                    <input type="text" id="parentId3" placeholder='<@spring.message ""/>'
                       style="width:150px;" data-bind="value:model.parentCompanyId">
                                             <script>
                    $("#parentId3").kendoLov($.extend(${lovProvider.getLov(base.contextPath, base.locale, "HapExam_LV_CUSTOMERS")}, {
                        query: function (e) {
                            e.param['enabledFlag'] = 'Y';
                        }
                    }))
                </script>
                                </div>
                                </div>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">订单日期</label>
                                  <div class="col-sm-8">                              
                                            <input style="width: 100%" data-role="datetimepicker"
                                           data-bind="value:model.createdAfter" class="k-datetimepicker">
                                           
                                </div>
                                </div>
                            </div>
                            
                             <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">订单金额</label>
                                    <div class="col-sm-8">
                                       <input type="text" style="width: 100%"
                                           data-bind="value:model.d" class="k-textbox">
                                </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">订单状态</label>
                                    <div class="col-sm-8">
                                        <select data-role="combobox" data-value-primitive="true" placeholder='<@spring.message "hapexam.order.state"/>' style="width:150px;"
										data-text-field="meaning" data-value-field="value"
										data-bind="source: resourceTypeData2, value: model.type"></select>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-sm-12">
                           <span class="btn btn-default" data-bind="click:queryResource"
                                 type="submit"><i></i><@spring.message "保存"/></span>     
                                 
                             <span class="btn btn-default" data-bind="click:queryResource"
                                 type="submit"><i></i><@spring.message "提交"/></span> 
                                 
                               <span class="btn btn-default" data-bind="click:queryResource"
                                 type="submit"><i></i><@spring.message "审批"/></span> 
                                 
                                  <span class="btn btn-default" data-bind="click:queryResource"
                                 type="submit"><i></i><@spring.message "拒绝"/></span> 
                                 
                                <span class="btn btn-default" type="button" data-bind="click:resetForm"><i></i><@spring.message "删除"/></span>
                                 
                                  <span class="btn btn-default" data-bind="click:queryResource"
                                 type="submit"><i></i><@spring.message "打印"/></span> 
                                 
                                  <span class="btn btn-default" data-bind="click:queryResource"
                                 type="submit"><i></i><@spring.message "返回"/></span>                           
                 
                    </div>
                  
                </div>
              
           
                
            </div>
            <script>kendo.bind($('#inQuery'), viewModel);</script>
           

            <div style="clear: both;">
               
               
               
               <ul id="myTab" class="nav nav-tabs">

    <li class="active">

        <a href="#home" data-toggle="tab" id="first">
                        主要
       </a>

    </li>

    <li><a href="#ios" data-toggle="tab" id="second">其他</a></li>

</ul>

<div id="page-content">
    <div class="pull-left" id="toolbar-btn" style="padding-bottom:10px;">
        <span class="btn btn-primary" style="float:left;margin-right:5px;"  data-bind="click:createFunction"><i class="fa fa-plus-square" style="margin-right:3px;"></i><@spring.message "hap.new"/></span>
        <span class="btn btn-success k-grid-save-changes" style="float:left;margin-right:5px;" data-bind="click:saveFunction"><i class="fa fa-save" style="margin-right:3px;"></i><@spring.message "hap.save"/></span>
        <span onclick="deleteData()" class="btn btn-danger" style="float:left;"><i class="fa fa-trash-o" style="margin-right:3px;"></i><@spring.message "hap.delete"/></span>
    </div>
    <script>kendo.bind($('#toolbar-btn'), viewModel);</script>
   
    <script>kendo.bind($('#query-form'), viewModel);</script>
    <div style="clear: both;">
        <div id="grid"></div>
    </div>
</div>

<div id="myTabContent" class="tab-content" >

    <div class="tab-pane fade in active" id="home"  style="clear: both">

       <div id="grid1"></div>

    </div>

    <div class="tab-pane fade" id="ios" style="clear: both">

        <div id="grid2"></div>

    </div>

</div>
               
               
               
               
               
            </div>
        </div>     
</div>



</div>  

 <script>  

	  var crudServiceBaseUrl = '${base.contextPath}/HapExam/AllOrder',
	  dataSource = new kendo.data.DataSource({
	      transport: {
	          read: {
	              url: crudServiceBaseUrl + "/query",
	              type    : "POST",
	              dataType: "json"
	          },
	          create: {
	              url: crudServiceBaseUrl + "/submit",
	              contentType: "application/json",
	              type: "POST"
	          },
	          update: {
	              url: crudServiceBaseUrl + "/submit",
	              contentType: "application/json",
	              type: "POST"
	          },
	          destroy: {
	              url: crudServiceBaseUrl + "/remove",
	              contentType: "application/json",
	              type: "POST"
	          },
	          parameterMap: function (options, type) {
	              if (type !== "read" && options.models) {
	                  var datas = Hap.prepareSubmitParameter(options, type);
	                  return kendo.stringify(datas);
	              } else if (type === "read") {
	                  return Hap.prepareQueryParameter(viewModel.model.toJSON(), options);
	              }
	          }
	      },
	      batch: true,
	      serverPaging: true,
	      pageSize: 5,
	      schema: {
	          data: 'rows',
	          total: 'total',
	          model: {
	              id: "",
	              fields: {
	                  
	                
	                  
	      
	              }
	          }
	      }
	  });

	  var grid = $("#grid1").kendoGrid({
	        dataSource: dataSource,
	        navigatable: true,
	        height: '100%',
	        resizable: true,
	        scrollable: true,
	        selectable:'multiple,rowbox',
	        pageable: {
	            pageSizes: [5, 10, 20, 50],
	            refresh: true,
	            buttonCount: 5
	        },
	        columns: [
	            {
	                field: "lineNumber",
	                title: '<@spring.message "行号"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                }
	            },
	            {
	                field: "itemCode",
	                title: '<@spring.message "物料编码"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            },
	            {
	                field: "itemDescription",
	                title: '<@spring.message "物料描述"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            },
	            {
	                field: "orderQuantityUom",
	                title: '<@spring.message "产品单位"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            },
	            {
	                field: "orderdQuantity",
	                title: '<@spring.message "数量"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            },
	            {
	                field: "unitSellingPrice",
	                title: '<@spring.message "销售单价"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            },
	            {
	                field: "money",
	                title: '<@spring.message "金额"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            },
	            {
	                field: "description",
	                title: '<@spring.message "备注"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	            }
		              
	      ],

	      editable: "inline"

	  }).data("kendoGrid");

	  Hap.autoResizeGrid("#grid1");
	  
	  var grid = $("#grid2").kendoGrid({
	        dataSource: dataSource,
	        navigatable: true,
	        height: '100%',
	        resizable: true,
	        scrollable: false,
	    
	        pageable: {
	            pageSizes: [5, 10, 20, 50],
	            refresh: true,
	            buttonCount: 5
	        },
	        columns: [
	            {
	                field: "lineNumber",
	                title: '<@spring.message "行号"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                }
	             
	            },
	            {
	                field: "addition1",
	                title: '<@spring.message "附件信息1"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	                
	            },
	            {
	                field: "addition2",
	                title: '<@spring.message "附件信息2"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	                
	            }
	            ,
	            {
	                field: "addition3",
	                title: '<@spring.message "附件信息3"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	                
	            }
	            ,
	            {
	                field: "addition4",
	                title: '<@spring.message "附件信息4"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	                
	            }
	            ,
	            {
	                field: "addition5",
	                title: '<@spring.message "附件信息5"/>',
	                width: 60,
	                headerAttributes: {
	                    "class": "table-header-cell",
	                    style: "text-align: center"
	                },
	                
	            }
	      ],

	      editable: "inline"

	  }).data("kendoGrid");
	  
	  Hap.autoResizeGrid("#grid2");
	  
	  
	  function editFunctionResources(){
	    	var checked = grid.selectedDataItems();
	    	if(checked.length == 1){
	    	    var data = grid.dataItem(grid.select());
	    	    grid.editRow(data);
	    	}else{
	            kendo.ui.showInfoDialog({
	            	message: $l('hap.tip.selectrow')
	            })
	    	 }
	    }
 </script>
 <script>
 ("#second").("shown.bs.tab",function(e){
	  $('#grid1').data('kendoGrid').saveChanges();
	  
	  
 })

 </script>



    
    
  


<style>
    .fadeoff .k-textbox{
        background: #eeeeee;
    }

</style>
</body>
</html>
